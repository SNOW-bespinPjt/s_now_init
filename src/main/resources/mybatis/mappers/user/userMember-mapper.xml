<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.btc.snow.user.member.IUserMemberDaoMB">
	
	<select id="isUser"
			parameterType="String"
			resultType="Boolean">
		SELECT 
			COUNT(*)
		FROM
			tbl_user_member
		WHERE
			u_m_id = #{u_m_id}
	</select>

	<insert id="insertUserMember"
			parameterType="com.btc.snow.user.member.UserMemberDto">
		INSERT INTO
			tbl_user_member(u_m_id,
			                u_m_pw,
			                u_m_name,
			                u_m_mail,
			                u_m_phone,
			                u_m_home_phone,
			                u_m_address,
			                u_m_gender,
			                u_m_birthdate,
			                u_m_age,
			                u_m_university,
			                u_m_department,
			                u_m_gradu_status,
			                u_m_reg_date,
			                u_m_mod_date)
		VALUES
			(#{u_m_id},
			 #{u_m_pw},
			 #{u_m_name},
			 #{u_m_mail},
			 #{u_m_phone},
			 #{u_m_home_phone},
			 #{u_m_address},
			 #{u_m_gender},
			 #{u_m_birthdate},
			 #{u_m_age},
			 #{u_m_university},
			 #{u_m_department},
			 #{u_m_gradu_status},
			 NOW(), NOW())
	</insert>

	<select id="selectUserForLogin"
			parameterType="com.btc.snow.user.member.UserMemberDto"
			resultType="com.btc.snow.user.member.UserMemberDto">

		SELECT
			*
		FROM
			tbl_user_member
		WHERE
			u_m_id = #{u_m_id}

	</select>

	<update id="updateAccount" parameterType="com.btc.snow.user.member.UserMemberDto">

		UPDATE
			tbl_user_member
		SET
			u_m_mail = #{u_m_mail},
			u_m_phone = #{u_m_phone},
			u_m_home_phone = #{u_m_home_phone},
			u_m_address = #{u_m_address},
			u_m_university = #{u_m_university},
			u_m_department = #{u_m_department},
			u_m_gradu_status = #{u_m_gradu_status},
			u_m_mod_date = NOW()
		WHERE
			u_m_no = #{u_m_no}
	</update>

	<select id="getLatestAccountInfo" parameterType="com.btc.snow.user.member.UserMemberDto"
			resultType="com.btc.snow.user.member.UserMemberDto">

		SELECT
			*
		FROM
			tbl_user_member
		WHERE
			u_m_no = #{u_m_no}
	</select>

	<delete id="deleteUser"
			parameterType="Integer">

		DELETE FROM
			tbl_user_member
		WHERE
			u_m_no = #{u_m_no}
	</delete>



</mapper>